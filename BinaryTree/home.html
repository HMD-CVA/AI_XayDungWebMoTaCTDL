<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BST Visualizer - Giao Di·ªán Hi·ªán ƒê·∫°i</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- D3.js -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="home.css">
</head>
<body>
    <div class="app-container">
        <!-- App Header -->
        <div class="app-header" id="appHeader">
            <div class="app-title">
                <span>üå≥</span> Binary Search Tree Visualizer
            </div>
            <div class="header-controls">
                <button class="btn btn-light btn-sm" onclick="toggleControls()">
                    <span id="toggleIcon">‚ñ≤</span>
                </button>
            </div>
        </div>
        
        <!-- Show Controls Button (visible when collapsed) -->
        <div class="show-controls-container" id="showControlsContainer">
            <button class="btn btn-show-controls" onclick="toggleControls()">
                <span>‚ñº</span>
            </button>
        </div>
        
        <!-- Control Bar -->
        <div class="control-bar" id="controlBar">
            <div class="control-content">
                <!-- H√†ng 1: Kh·ªüi t·∫°o + Kh√°c + Node + Bound + Min/Max -->
                <div class="control-row">
                    <!-- Kh·ªüi t·∫°o c√¢y -->
                    <div class="ctrl-section">
                        <span class="section-label">üå≥ Kh·ªüi T·∫°o C√¢y</span>
                        <div class="section-controls">
                            <input type="number" id="nodeCount" class="form-control form-control-sm" placeholder="S·ªë node" min="1" max="20">
                            <select id="treeType" class="form-select form-select-sm">
                                <option value="balanced" selected>C√¢n b·∫±ng</option>
                                <option value="perfect">Ho√†n h·∫£o</option>
                                <option value="minavl">MinAVL</option>
                                <option value="unbalanced">Kh√¥ng c√¢n b·∫±ng</option>
                                <option value="right-skewed">L·ªách ph·∫£i</option>
                                <option value="left-skewed">L·ªách tr√°i</option>
                            </select>
                            <button class="btn btn-success btn-sm" onclick="createRandomTree()">üé≤ T·∫°o Ng·∫´u Nhi√™n</button>
                        </div>
                    </div>
                    
                    <div class="section-divider"></div>
                    
                    <!-- C√¢n b·∫±ng & X√≥a -->
                    <div class="ctrl-section">
                        <span class="section-label">‚öôÔ∏è Kh√°c</span>
                        <div class="section-controls">
                            <button class="btn btn-primary btn-sm" onclick="balanceTree()">‚öñÔ∏è C√¢n B·∫±ng</button>
                            <button class="btn btn-danger btn-sm" onclick="clearTree()">üóëÔ∏è X√≥a C√¢y</button>
                        </div>
                    </div>
                    
                    <div class="section-divider"></div>
                    
                    <!-- Thao t√°c Node -->
                    <div class="ctrl-section">
                        <span class="section-label">üìù Node</span>
                        <div class="section-controls">
                            <input type="number" id="nodeValue" class="form-control form-control-sm" placeholder="Gi√° tr·ªã" min="-9999" max="9999">
                            <button class="btn btn-primary btn-sm" onclick="insertNode()">‚ûï Th√™m</button>
                            <button class="btn btn-warning btn-sm" onclick="findNode()">üîç T√¨m</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteSelectedNode()">‚ùå X√≥a</button>
                        </div>
                    </div>
                    
                    <div class="section-divider"></div>
                    
                    <!-- Bound -->
                    <div class="ctrl-section">
                        <span class="section-label">üéØ Bound</span>
                        <div class="section-controls">
                            <input type="number" id="boundValue" class="form-control form-control-sm" placeholder="Gi√° tr·ªã" min="-9999" max="9999">
                            <button class="btn btn-info btn-sm" onclick="findLowerBound()">‚¨áÔ∏è Lower</button>
                            <button class="btn btn-info btn-sm" onclick="findUpperBound()">‚¨ÜÔ∏è Upper</button>
                        </div>
                    </div>
                    
                    <div class="section-divider"></div>
                    
                    <!-- Min/Max -->
                    <div class="ctrl-section">
                        <span class="section-label">üìä Min/Max</span>
                        <div class="section-controls">
                            <button class="btn btn-success btn-sm" onclick="findMin()">‚¨áÔ∏è Min</button>
                            <button class="btn btn-success btn-sm" onclick="findMax()">‚¨ÜÔ∏è Max</button>
                        </div>
                    </div>
                </div>
                
                <!-- H√†ng 2: Nh·∫≠p gi√° tr·ªã + Duy·ªát -->
                <div class="control-row">
                    <!-- Nh·∫≠p gi√° tr·ªã c·ª• th·ªÉ -->
                    <div class="ctrl-section flex-grow">
                        <span class="section-label">‚úçÔ∏è Nh·∫≠p Gi√° Tr·ªã</span>
                        <div class="section-controls">
                            <input type="text" id="nodeValues" class="form-control form-control-sm" placeholder="Nh·∫≠p nhi·ªÅu gi√° tr·ªã c√°ch nhau b·ªüi d·∫•u ph·∫©y (vd: 10,20,30,40,50)">
                            <button class="btn btn-primary btn-sm" onclick="createTreeFromInput()">T·∫°o C√¢y</button>
                        </div>
                    </div>
                    
                    <div class="section-divider"></div>
                    
                    <!-- Duy·ªát -->
                    <div class="ctrl-section">
                        <span class="section-label">üîÑ Duy·ªát C√¢y</span>
                        <div class="section-controls">
                            <button class="btn btn-outline-secondary btn-sm" onclick="traverseTree('preorder')">Pre-order</button>
                            <button class="btn btn-outline-secondary btn-sm" onclick="traverseTree('inorder')">In-order</button>
                            <button class="btn btn-outline-secondary btn-sm" onclick="traverseTree('postorder')">Post-order</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Graph Container -->
            <div class="graph-container" id="graphContainer">
                <svg id="treeSVG"></svg>
                
                <!-- Result Panel -->
                <div class="result-panel collapsed" id="resultPanel">
                    <button class="close-result-btn" onclick="toggleResultPanel()">√ó</button>
                    <div class="result-content" id="resultContent">K·∫øt qu·∫£ s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y</div>
                </div>
                <button class="toggle-result-btn" id="toggleResultBtn" onclick="toggleResultPanel()">
                    üìÑ
                </button>
                
                <!-- Algorithm Panel -->
                <div class="algorithm-panel collapsed" id="algorithmPanel">
                    <button class="close-algorithm-btn" onclick="toggleAlgorithmPanel()">√ó</button>
                    <pre class="algorithm-code" id="algorithmCode">Ch·ªçn m·ªôt thao t√°c ƒë·ªÉ xem thu·∫≠t to√°n</pre>
                </div>
                <button class="toggle-algorithm-btn" id="toggleAlgorithmBtn" onclick="toggleAlgorithmPanel()">
                    üìù
                </button>
                
                <!-- Legend -->
                <!-- Stats -->
                <div class="stats-panel collapsed" id="statsPanel">
                    <div class="stats-title">
                        <span>üìä Th·ªëng K√™ C√¢y</span>
                        <button class="close-stats-btn" onclick="toggleStatsPanel()">√ó</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span>T·ªïng Nodes:</span>
                            <span class="stat-value" id="nodeCountDisplay">0</span>
                        </div>
                        <div class="stat-item">
                            <span>Chi·ªÅu Cao:</span>
                            <span class="stat-value" id="treeHeight">0</span>
                        </div>
                        <div class="stat-item">
                            <span>Node ƒêang Ch·ªçn:</span>
                            <span class="stat-value" id="selectedValue">-</span>
                        </div>
                        <div class="stat-item">
                            <span>Tr·∫°ng Th√°i BST:</span>
                            <span class="stat-value" id="balanceStatus">‚úì</span>
                        </div>
                    </div>
                </div>
                <button class="toggle-stats-btn" id="toggleStatsBtn" onclick="toggleStatsPanel()">
                    üìä
                </button>
            </div>
        </div>
    </div>

    <!-- Animation Control Bar -->
    <div class="animation-control-bar" id="animationControlBar">
        <div class="control-bar-content">
            <button class="control-btn" id="prevStepBtn" onclick="prevStep()" title="B∆∞·ªõc tr∆∞·ªõc">
                <span>‚è™</span>
            </button>
            <button class="control-btn" id="playPauseBtn" onclick="togglePlayPause()" title="T·∫°m d·ª´ng/Ti·∫øp t·ª•c">
                <span id="playPauseIcon">‚è∏Ô∏è</span>
            </button>
            <button class="control-btn" id="nextStepBtn" onclick="nextStep()" title="B∆∞·ªõc ti·∫øp">
                <span>‚è©</span>
            </button>
            
            <div class="timeline-container">
                <span class="step-indicator" id="stepIndicator">0/0</span>
                <input type="range" class="timeline-slider" id="timelineSlider" min="0" max="0" value="0" disabled>
                <span class="time-display" id="timeDisplay">0:00</span>
            </div>
            
            <div class="speed-control">
                <label for="speedSelect">‚ö°</label>
                <select class="speed-select" id="speedSelect" onchange="changeSpeed()">
                    <option value="600">0.5x</option>
                    <option value="400" selected>1x</option>
                    <option value="200">2x</option>
                    <option value="133">3x</option>
                    <option value="100">4x</option>
                    <option value="80">5x</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="home.js"></script>
</body>
</html>