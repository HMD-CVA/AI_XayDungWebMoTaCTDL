<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkedList Visualizer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./style.css">
</head>

<body>

    <header class="text-white py-4 shadow-sm">
        <div class="container header-bar">
            <div class="d-flex align-items-center gap-2">
                <span class="header-icon"><i class="bi bi-link-45deg"></i></span>
                <span>LinkedList Visualizer</span>
            </div>
            <a href="../index.html" class="home-btn">
                <i class="bi bi-house-door"></i>
                <span>Home</span>
            </a>
        </div>
    </header>

    <div class="busy-overlay">
        <div class="toolbar container my-4">
            <div class="card shadow-sm">
                <div class="card-body function-card">
                    <div class="d-flex flex-column gap-3">
                        <div class="d-flex flex-wrap align-items-center gap-2">
                            <button id="btn-tutorial" class="btn btn-primary"><i class="bi bi-question-circle"></i> Tutorial</button>
                            <button id="btn-add" class="btn btn-success"><i class="bi bi-plus-circle"></i> Add</button>
                            <button id="btn-remove" class="btn btn-danger"><i class="bi bi-dash-circle"></i> Remove</button>
                            <button id="btn-search-value" class="btn btn-info"><i class="bi bi-search"></i> Search</button>
                            <button id="btn-create-random" class="btn btn-warning"><i class="bi bi-shuffle"></i> Random</button>
                            <button id="btn-clear" class="btn btn-secondary"><i class="bi bi-trash"></i> Clear</button>
                            <button id="btn-check-empty" class="btn btn-success"><i class="bi bi-clipboard-check"></i> Is empty</button>
                            <button id="btn-get-size" class="btn btn-primary"><i class="bi bi-list-ol"></i> Size</button>
                        </div>
                        <div class="d-flex align-items-center gap-3 flex-wrap">
                            <label class="form-label mb-0 fw-bold text-nowrap">
                                <i class="bi bi-speedometer2"></i> Step delay:
                            </label>
                            <input type="range" class="form-range" id="animation-speed-slider" min="100" max="1000" step="100" value="500" style="max-width: 240px;">
                            <span id="speed-value" class="badge bg-primary">500ms</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                <div class="col-12" id="display-container">
                    <div class="display-area"></div>
                </div>
            </div>
        </div>

        <!-- Sidebar Overlay -->
        <div id="sidebar-overlay" class="sidebar-overlay">
            <div id="sidebar" class="card shadow-sm">
                <div class="sidebar-title d-flex align-items-center gap-2 px-3 py-3">
                    <i class="bi bi-code-slash fs-5"></i>
                    <h1 class="sidebar-heading mb-0">Pseudocode</h1>
                </div>
                <div class="card-body">
                    <pre id="pseudocode-content" class="mb-0"><code style="color: #008800;">// Chọn một chức năng để xem mã giả...</code></pre>
                </div>
            </div>
        </div>

        <!-- Toggle Button -->
        <button id="toggle-sidebar" class="btn btn-dark rounded-pill shadow" title="Toggle sidebar">
            <i class="bi bi-chevron-left"></i>
        </button>
    </div>

    <div class="overlay">
        <div class="node-modal card shadow-lg">
            <div class="node-modal-header card-header bg-primary text-white d-flex justify-content-between align-items-center">
                <span class="node-name fw-bold">Node 0</span>
                <button id="btn-remove-node" class="btn btn-sm btn-danger ms-3">
                    <i class="bi bi-dash-circle"></i> Delete
                </button>
            </div>
            <div class="node-modal-body card-body">
                <div class="mb-3">
                     <div class="input-group">
                        <span class="input-group-text">Value</span>
                        <input type="text" id="input-value-modal" class="form-control" maxlength="4" placeholder="Enter value" autocomplete="off">
                    </div>
                </div>
                <div class="d-flex gap-2">
                    <button id="btn-add-before" class="btn btn-success flex-fill"><i class="bi bi-arrow-left"></i> Add Before</button>
                    <button id="btn-add-after" class="btn btn-success flex-fill"><i class="bi bi-arrow-right"></i> Add After</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Modal -->
    <div class="overlay-add">
        <div class="modal-add card shadow-lg">
            <div class="card-body">
                <h5 class="card-title mb-3"><i class="bi bi-plus-circle"></i> Add Node</h5>
                <div class="mb-3">
                    <div class="input-group">
                        <span class="input-group-text">Value</span>
                        <input type="text" id="input-value-add" class="form-control" maxlength="4" placeholder="Enter value" autocomplete="off">
                    </div>  
                </div>
                <div class="d-flex flex-column gap-2">
                    <button id="btn-add-head" class="btn btn-success"><i class="bi bi-arrow-left-circle"></i> Add Head</button>
                    <button id="btn-add-tail" class="btn btn-success"><i class="bi bi-arrow-right-circle"></i> Add Tail</button>
                    <div class="input-group">
                        <span class="input-group-text">Index</span>
                        <input id="input-add-index" class="form-control" type="number" placeholder="0" min="0" max="25" autocomplete="off">
                        <button id="btn-add-index" class="btn btn-success"><i class="bi bi-check-lg"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Remove Modal -->
    <div class="overlay-remove">
        <div class="modal-remove card shadow-lg">
            <div class="card-body">
                <h5 class="card-title mb-3"><i class="bi bi-dash-circle"></i> Remove Node</h5>
                <div class="d-flex flex-column gap-2">
                    <button id="btn-remove-head" class="btn btn-danger"><i class="bi bi-dash-circle"></i> Remove Head</button>
                    <button id="btn-remove-tail" class="btn btn-danger"><i class="bi bi-dash-circle"></i> Remove Tail</button>
                    <div class="input-group">
                        <span class="input-group-text">Index</span>
                        <input id="input-remove-index" class="form-control" type="number" placeholder="0" min="0" max="25" autocomplete="off">
                        <button id="btn-remove-index" class="btn btn-danger"><i class="bi bi-check-lg"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- create random modal -->
    <div class="overlay-create-random">
        <div class="modal-create-random card shadow-lg">
            <div class="card-body">
                <h5 class="card-title mb-3">Create Random List</h5>
                <div class="input-group">
                    <span class="input-group-text">n =</span>
                    <input class="number-n form-control" type="number" placeholder="Enter size" maxlength="4" min="1" max="25" autocomplete="off">
                    <button id="btn-go" class="btn btn-primary"><i class="bi bi-check-lg"></i> Go</button>
                </div>
            </div>
        </div>
    </div>

    <!-- search modal -->
    <div class="overlay-search">
        <div class="modal-search card shadow-lg">
            <div class="card-body">
                <h5 class="card-title mb-3"><i class="bi bi-search"></i> Search Node</h5>
                
                <div class="mb-3">
                    <label class="form-label fw-bold">By Value</label>
                    <div class="input-group">
                        <input id="input-search-value" class="form-control" type="text" placeholder="Enter value" maxlength="4" autocomplete="off">
                        <button id="btn-search-by-value" class="btn btn-info"><i class="bi bi-search"></i> Go</button>
                    </div>
                </div>
                
                <div>
                    <label class="form-label fw-bold">By Index</label>
                    <div class="input-group">
                        <input id="input-search-index" class="form-control" type="number" placeholder="Enter index" min="0" autocomplete="off">
                        <button id="btn-search-by-index" class="btn btn-info"><i class="bi bi-search"></i> Go</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Hướng dẫn sử dụng -->
    <div class="modal fade" id="guideModal" tabindex="-1" aria-labelledby="guideModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="guideModalLabel">Linked List (Danh Sách Liên Kết)</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Phần 1: Lý thuyết cơ bản -->
                    <div class="guide-section">
                        <h6 class="guide-title">1. Giới Thiệu Linked List</h6>
                        <p><strong>Định nghĩa:</strong> Linked List là cấu trúc dữ liệu tuyến tính trong đó các phần tử không được lưu trữ liên tiếp trong bộ nhớ mà được liên kết với nhau thông qua con trỏ.</p>
                        <ul>
                            <li><strong>Node:</strong> Đơn vị cơ bản gồm 2 phần:
                                <ul>
                                    <li><code>value</code>: Giá trị dữ liệu</li>
                                    <li><code>next</code>: Con trỏ đến node tiếp theo</li>
                                </ul>
                            </li>
                            <li><strong>Head:</strong> Node đầu tiên của danh sách</li>
                            <li><strong>Tail:</strong> Node cuối cùng (next = null)</li>
                            <li><strong>Ưu điểm:</strong> Thêm/xóa nhanh, không cần cấp phát trước bộ nhớ</li>
                            <li><strong>Nhược điểm:</strong> Không truy cập trực tiếp theo index, tốn bộ nhớ cho con trỏ</li>
                        </ul>
                    </div>

                    <!-- Phần 2: Độ phức tạp -->
                    <div class="guide-section">
                        <h6 class="guide-title">2. Độ Phức Tạp Thuật Toán</h6>
                        <table class="table table-bordered table-sm">
                            <thead class="table-light">
                                <tr>
                                    <th>Thao tác</th>
                                    <th>Độ phức tạp</th>
                                    <th>Ghi chú</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Add Head</td>
                                    <td><code>O(1)</code></td>
                                    <td>Truy cập trực tiếp head</td>
                                </tr>
                                <tr>
                                    <td>Add Tail</td>
                                    <td><code>O(1)</code></td>
                                    <td>Với tail pointer</td>
                                </tr>
                                <tr>
                                    <td>Add at Index</td>
                                    <td><code>O(n)</code></td>
                                    <td>Phải duyệt đến vị trí</td>
                                </tr>
                                <tr>
                                    <td>Remove Head</td>
                                    <td><code>O(1)</code></td>
                                    <td>Truy cập trực tiếp head</td>
                                </tr>
                                <tr>
                                    <td>Remove Tail</td>
                                    <td><code>O(n)</code></td>
                                    <td>Phải tìm node trước tail</td>
                                </tr>
                                <tr>
                                    <td>Search</td>
                                    <td><code>O(n)</code></td>
                                    <td>Duyệt tuần tự từ head</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Phần 3: Các thao tác cơ bản -->
                    <div class="guide-section">
                        <h6 class="guide-title">3. Các Thao Tác Cơ Bản</h6>
                        
                        <p><strong>3.1. Thêm node (Add)</strong></p>
                        <ul>
                            <li><strong>Add Head:</strong> Tạo node mới → <code>newNode.next = head</code> → <code>head = newNode</code></li>
                            <li><strong>Add Tail:</strong> Tạo node mới → <code>tail.next = newNode</code> → <code>tail = newNode</code></li>
                            <li><strong>Add at Index:</strong> Duyệt đến vị trí (index-1) → Chèn node vào giữa</li>
                            <li><strong>Add Before/After:</strong> Tìm node tham chiếu → Chèn trước/sau node đó</li>
                        </ul>

                        <p><strong>3.2. Xóa node (Remove)</strong></p>
                        <ul>
                            <li><strong>Remove Head:</strong> <code>head = head.next</code> (nếu có)</li>
                            <li><strong>Remove Tail:</strong> Duyệt đến node trước tail → <code>prevNode.next = null</code> → <code>tail = prevNode</code></li>
                            <li><strong>Remove at Index:</strong> Duyệt đến vị trí → Bỏ qua node cần xóa trong chuỗi liên kết</li>
                            <li><strong>Lưu ý:</strong> Phải cập nhật con trỏ <code>next</code> để không mất liên kết</li>
                        </ul>

                        <p><strong>3.3. Tìm kiếm (Search)</strong></p>
                        <ul>
                            <li><strong>By Value:</strong> Duyệt từ head, so sánh giá trị từng node cho đến khi tìm thấy hoặc gặp null</li>
                            <li><strong>By Index:</strong> Duyệt từ head, đếm từ 0 đến index cần tìm</li>
                            <li><strong>Độ phức tạp:</strong> O(n) - phải duyệt tuần tự</li>
                        </ul>
                    </div>

                    <!-- Phần 4: Khái niệm nâng cao -->
                    <div class="guide-section">
                        <h6 class="guide-title">4. Tính Năng Nâng Cao</h6>
                        
                        <p><strong>4.1. Animation & Visualization</strong></p>
                        <ul>
                            <li><strong>Step Delay:</strong> Điều chỉnh tốc độ animation (100ms - 1000ms) để quan sát rõ từng bước</li>
                            <li><strong>Highlight:</strong> Node đang xử lý được tô sáng màu khác</li>
                            <li><strong>Pseudocode:</strong> Xem mã giả của thuật toán đang thực hiện ở sidebar</li>
                        </ul>

                        <p><strong>4.2. Random Generation</strong></p>
                        <ul>
                            <li>Tạo danh sách ngẫu nhiên từ 1-25 node</li>
                            <li>Giá trị mỗi node: số nguyên ngẫu nhiên 1-100</li>
                            <li>Animation thêm dần từng node để quan sát quá trình xây dựng</li>
                        </ul>

                        <p><strong>4.3. Persistent Storage</strong></p>
                        <ul>
                            <li>Danh sách tự động lưu vào LocalStorage</li>
                            <li>Khôi phục lại khi reload trang</li>
                            <li>Dữ liệu không bị mất khi đóng tab</li>
                        </ul>
                    </div>

                    <!-- Phần 5: Hướng dẫn sử dụng -->
                    <div class="guide-section">
                        <h6 class="guide-title">5. Hướng Dẫn Sử Dụng</h6>
                        
                        <p><strong>Bước 1: Tạo danh sách</strong></p>
                        <ul>
                            <li>Click <strong>Random</strong> → Nhập số lượng node (1-25) → <strong>Go</strong></li>
                            <li>Hoặc click <strong>Add</strong> → Nhập giá trị → Chọn <strong>Add Head/Tail/Index</strong></li>
                        </ul>

                        <p><strong>Bước 2: Thao tác với node</strong></p>
                        <ul>
                            <li><strong>Click vào node:</strong> Mở menu thao tác (Add Before/After, Delete, Update)</li>
                            <li><strong>Search:</strong> Tìm theo Value hoặc Index để quan sát quá trình duyệt</li>
                            <li><strong>Remove:</strong> Xóa Head/Tail/Index hoặc click node rồi Delete</li>
                        </ul>

                        <p><strong>Bước 3: Quan sát & Học tập</strong></p>
                        <ul>
                            <li>Mở <strong>Pseudocode</strong> ở sidebar để xem mã giả</li>
                            <li>Điều chỉnh <strong>Step Delay</strong> để xem animation chậm/nhanh</li>
                            <li>Thử các thao tác khác nhau để hiểu rõ cách Linked List hoạt động</li>
                        </ul>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Tour Guide Overlay -->
    <div id="tourOverlay" class="tour-overlay">
        <div id="tourSpotlight" class="tour-spotlight"></div>
        <div id="tourPopup" class="tour-popup">
            <div class="tour-header">
                <h5 id="tourTitle">Tour Hướng Dẫn</h5>
                <button id="tourSkip" class="btn btn-sm btn-light tour-skip-btn">Bỏ qua</button>
            </div>
            <div id="tourContent" class="tour-content"></div>
            <div class="tour-footer">
                <button id="tourPrev" class="btn btn-sm btn-outline-secondary">← Trước</button>
                <button id="tourNext" class="btn btn-sm btn-primary">Tiếp →</button>
            </div>
        </div>
    </div>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script type="module" src="./script.js"></script>
</body>

</html>